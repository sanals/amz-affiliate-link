(function(){"use strict";const o="amazon-affiliate-converter-v1",i=["/","/index.html","/manifest.json","/favicon.ico","/favicon.svg","/icons/apple-touch-icon.png","/icons/icon-192x192.png","/icons/icon-512x512.png"];self.addEventListener("install",e=>{e.waitUntil(caches.open(o).then(c=>(console.log("Opened cache"),c.addAll(i))))});const a=e=>{try{const c=new URL(e),n=["http","https"],t=[self.location.hostname,"fonts.googleapis.com","fonts.gstatic.com"];return n.includes(c.protocol.replace(":",""))&&(t.includes(c.hostname)||c.hostname==="localhost")}catch{return!1}};self.addEventListener("fetch",e=>{e.request.method==="GET"&&a(e.request.url)&&e.respondWith(caches.match(e.request).then(c=>{if(c)return c;const n=e.request.clone();return fetch(n).then(t=>{if(!t||t.status!==200||t.type!=="basic"||!a(e.request.url))return t;try{const r=t.clone();return caches.open(o).then(s=>{s.put(e.request,r).catch(l=>console.log("Cache put error:",l))}).catch(s=>console.log("Cache open error:",s)),t}catch(r){return console.error("Service worker cache error:",r),t}}).catch(t=>{console.log("Fetch failed:",t)})}))}),self.addEventListener("activate",e=>{const c=[o];e.waitUntil(caches.keys().then(n=>Promise.all(n.map(t=>{if(c.indexOf(t)===-1)return caches.delete(t)}))))})})();
